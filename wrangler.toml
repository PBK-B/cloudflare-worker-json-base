#:schema node_modules/wrangler/config-schema.json
name = "worker-json-base"
main = "dist/index.js"
compatibility_date = "2024-05-02"
compatibility_flags = ["nodejs_compat"]

[build]
command = "npm run build"
watch_dir = "./src"

[vars]
ENVIRONMENT = "development"
VERSION = "2.0.0"
STORAGE_BACKEND = "d1"
RATE_LIMIT_ENABLED = false

# D1 数据库
[[d1_databases]]
binding = "JSONBASE_DB"
database_name = "jsonbase"

# 本地开发配置
[env.development]
name = "worker-json-base-dev"

# 生产环境配置
[env.production]
name = "worker-json-base"

[assets]
directory = "dist-webui/dash"
binding = "WEBUI"
run_worker_first = true
